---
title: CLI Reference
description: Complete dfs command reference.
---

import { Badge } from '@site/src/components/Badge';

## Setup

### `dfs doctor`

<Badge status="stable" />

```sh
dfs doctor
```

Verify that all required tooling is installed and configured correctly. Run this after installation to confirm your environment is ready.

### `dfs setup shell`

<Badge status="dev" />

```sh
dfs setup shell
```

One-time shell setup that adds Ghostty integration, starship prompt, carapace completions, and fzf keybindings to `~/.zshrc`. This command is idempotent and safe to run multiple times.

### `dfs setup credentials`

<Badge status="dev" />

```sh
dfs setup credentials
```

Interactive prompt for entering your Anthropic and OpenAI API keys. Credentials are written to `~/.config/defuse/config.toml`.

### `dfs init`

<Badge status="stable" />

```sh
dfs init
```

Initialize a project by creating the standard directory structure with defaults: `.defuse/`, `.agent-mail/`, `kanban/`, and `.claude/skills/`.

### `dfs start`

<Badge status="stable" />

```sh
dfs start
```

Open Ghostty and launch a tmux session with the project layout, including workspace, dashboard, and review windows.

### `dfs update`

<Badge status="dev" />

```sh
dfs update
```

Pull the latest version of defuse and re-run `mise install` to apply any dependency changes.

### `dfs uninstall`

<Badge status="dev" />

```sh
dfs uninstall
```

Remove the defuse installation, including the repo, configuration, and symlink.

---

## Agent Operations

### `dfs launch`

```sh
dfs launch "<task>"
dfs launch
dfs launch ab "<task>" --models <model1>,<model2>
dfs launch tree "<task>" --model <parent> --child-model <child> --max-depth <n> --budget <amount>
```

Spawn agents to work on tasks in isolated jj workspaces.

- With a task argument: spawns a single agent on the specified task. <Badge status="dev" />
- Without arguments: dispatches the next ready task from the kanban board. <Badge status="planned" />
- `ab` subcommand: runs an A/B comparison by launching two agents on the same task using different models. <Badge status="dev" />
- `tree` subcommand: recursive decomposition where a parent model breaks down the task and child agents execute the subtasks. <Badge status="planned" />

**`dfs launch ab` flags**

| Flag | Description |
|---|---|
| `--models <model1>,<model2>` | Comma-separated list of two models to compare |

**`dfs launch tree` flags**

| Flag | Description |
|---|---|
| `--model <model>` | Model used for the parent decomposition step |
| `--child-model <model>` | Model used by child agents for execution |
| `--max-depth <n>` | Maximum recursion depth for decomposition |
| `--budget <amount>` | Spending limit for the tree run |

### `dfs status`

<Badge status="stable" />

```sh
dfs status
```

Show a summary of active agents, pending reviews, queue depth, and accumulated costs.

### `dfs kill`

<Badge status="dev" />

```sh
dfs kill <agent>
```

Stop a running agent and clean up its process. The agent's workspace is preserved.

### `dfs answer`

<Badge status="dev" />

```sh
dfs answer <id> "<response>"
```

Send a reply to an agent that is waiting for a question to be answered.

### `dfs clean`

<Badge status="dev" />

```sh
dfs clean
```

Remove abandoned workspaces left behind by agents that were killed or otherwise terminated without cleanup.

---

## Search & Review

### `dfs search`

<Badge status="stable" />

```sh
dfs search "<query>"
```

Full-text search across command blocks and agent messages using libSQL FTS5. Returns relevant results from the project's stored history.

### `dfs review`

<Badge status="planned" />

```sh
dfs review
```

Open the interactive review TUI to inspect and act on completed agent work.

---

## Work Shaping

### `dfs slice-to-kanban`

<Badge status="dev" />

```sh
dfs slice-to-kanban
```

Convert slice files at `.shaped/slices/*.md` into tasks on the kanban board.

---

## Keyboard Shortcuts

These shortcuts are available inside a `dfs start` tmux session.

| Shortcut | Action | Status |
|---|---|---|
| `Ctrl+R` | Search command history (fzf over libSQL) | <Badge status="stable" /> |
| `Ctrl+B N` | Spawn an agent on a task | <Badge status="planned" /> |
| `Ctrl+B R` | Review view | <Badge status="planned" /> |
| `Ctrl+B D` | Dashboard (cross-project) | <Badge status="planned" /> |
| `Ctrl+B K` | Advanced search | <Badge status="planned" /> |
| `Ctrl+B G` | Open lazygit | <Badge status="planned" /> |
| `Ctrl+B 1..9` | Switch tmux windows | <Badge status="planned" /> |
| `` Ctrl+` `` | Toggle block inspector | <Badge status="planned" /> |
